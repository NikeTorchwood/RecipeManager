# RecipeManager API

Тестовое задание: REST API для управления книгой рецептов.

## Технологический стек
*   **.NET 9**
*   **PostgreSQL** (База данных)
*   **Dapper** + **Dapper.SqlBuilder** (Работа с БД)
*   **FluentMigrator** (Миграции БД)
*   **FluentValidation** (Валидация входящих данных)
*   **AutoMapper** (Маппинг объектов)
*   **xUnit** + **Moq** + **FluentAssertions** (Тестирование)

## Функциональность
*   CRUD операции для Категорий, Ингредиентов и Рецептов.
*   **Рецепты**:
    *   Создание/Редактирование рецепта вместе со списком ингредиентов (транзакционно).
    *   Умное обновление состава (Delta Update): при изменении рецепта в БД отправляются только реальные изменения (add/delete/update), ID связей сохраняются.
    *   Фильтрация: по названию, категории, датам создания, **наличию ингредиента**.
    *   Сортировка: динамическая (защищена от SQL-инъекций).
    *   Пагинация.

## Запуск проекта

1.  Убедитесь, что у вас установлен **PostgreSQL**.
2.  Пропишите строку подключения в `appsettings.json` (секция `ConnectionStrings:DefaultConnection`).
3.  Запустите проект.
    *   При старте приложение автоматически создаст базу данных (если её нет) и накатят миграции.
4.  API доступно по адресу: `https://localhost:7165/swagger`

## Тесты
В проекте реализованы Unit-тесты для слоя сервисов (`RecipeService`), покрывающие сценарии создания, валидации и сложного обновления связей.
Запуск тестов: `dotnet test`
